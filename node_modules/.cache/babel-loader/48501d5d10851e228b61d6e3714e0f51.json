{"ast":null,"code":"import { GET_PRODUCTS_SUCCESS, GET_PRODUCTS_LOADING, GET_PRODUCTS_ERROR, GET_PRODUCT_DETAIL_LOADING, GET_PRODUCT_DETAIL_SUCCESS, GET_PRODUCT_DETAIL_ERROR, ADD_TO_CART_LOADING, ADD_TO_CART_SUCCESS, ADD_TO_CART_ERROR, REMOVE_FROM_CART_LOADING, REMOVE_FROM_CART_SUCCESS, REMOVE_FROM_CART_ERROR } from \"../types\";\nimport axios from \"axios\";\nimport { createMessage } from \"./messages\";\nimport { productListURL, endpoint, addToCartURL, removeFromCartURL, searchURL, orderItemsDeleteURL, messageURL } from \"../../constant\";\nimport { authAxios } from \"../../utils\";\nimport { fetchCart } from \"./cart\";\nexport const getItems = () => dispatch => {\n  dispatch({\n    type: GET_PRODUCTS_LOADING\n  });\n  axios.get(productListURL).then(res => {\n    dispatch({\n      type: GET_PRODUCTS_SUCCESS,\n      payload: res.data\n    });\n  }).catch(err => {\n    dispatch({\n      type: GET_PRODUCTS_ERROR,\n      payload: err\n    });\n  });\n};\nexport const filterCategory = category => dispatch => {\n  dispatch({\n    type: GET_PRODUCTS_LOADING\n  });\n  axios.get(productListURL).then(res => {\n    console.log(res.data);\n    dispatch({\n      type: GET_PRODUCTS_SUCCESS,\n      payload: res.data\n    });\n  }).catch(err => {\n    dispatch({\n      type: GET_PRODUCTS_ERROR,\n      payload: err\n    });\n  });\n};\nexport const searchItems = item => dispatch => {\n  dispatch({\n    type: GET_PRODUCTS_LOADING\n  });\n  axios.get(`${searchURL}${item}`).then(res => {\n    dispatch({\n      type: GET_PRODUCTS_SUCCESS,\n      payload: res.data\n    });\n  }).catch(err => {\n    dispatch({\n      type: GET_PRODUCTS_ERROR,\n      payload: err\n    });\n  });\n};\nexport const getItemDetail = slug => dispatch => {\n  console.log(`${endpoint}${slug}`);\n  axios.get(`${endpoint}${slug}`).then(res => {\n    dispatch({\n      type: GET_PRODUCT_DETAIL_SUCCESS,\n      payload: res.data\n    });\n  }).catch(err => {\n    dispatch({\n      type: GET_PRODUCT_DETAIL_ERROR,\n      payload: err\n    });\n  });\n};\nexport const handleAddToCart = code => dispatch => {\n  dispatch({\n    type: ADD_TO_CART_LOADING\n  });\n  let cart = localStorage.getItem(\"cart\");\n  console.log(cart);\n  let inCart = cart === null || cart === void 0 ? void 0 : cart.item_obj.find(item => item.ref_code === code);\n  console.log(inCart);\n  console.log(code);\n  authAxios.post(`${addToCartURL}${code}/`).then(res => {\n    fetchCart();\n    dispatch({\n      type: ADD_TO_CART_SUCCESS,\n      payload: res.data\n    });\n  }).catch(err => {\n    dispatch({\n      type: ADD_TO_CART_ERROR,\n      payload: err\n    });\n  });\n};\nexport const handleRemoveFromCart = code => dispatch => {\n  console.log(`${removeFromCartURL}${code}/`);\n  dispatch({\n    type: REMOVE_FROM_CART_LOADING\n  });\n  authAxios.post(`${removeFromCartURL}${code}/`).then(res => {\n    dispatch({\n      type: REMOVE_FROM_CART_SUCCESS,\n      payload: res.data\n    });\n  }).catch(err => {\n    dispatch({\n      type: REMOVE_FROM_CART_ERROR,\n      payload: err\n    });\n  });\n};\nexport const handleRemoveItem = id => dispatch => {\n  // dispatch({\n  //   type: REMOVE_FROM_CART_LOADING,\n  // });\n  authAxios.delete(orderItemsDeleteURL(id)).then(res => {\n    fetchCart(); // dispatch({\n    //   type: REMOVE_FROM_CART_SUCCESS,\n    //   payload: id,\n    // });\n  }).catch(err => {\n    console.log(err);\n  });\n};\nexport const sendMsg = data => dispatch => {\n  const config = {\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  };\n  axios.post(messageURL, data, config).then(res => {\n    dispatch(createMessage(res.data));\n  }).catch(err => {\n    console.log(err);\n  });\n};","map":{"version":3,"sources":["D:/download/.New folder (2)/hair shop/UI/src/redux/action/products.js"],"names":["GET_PRODUCTS_SUCCESS","GET_PRODUCTS_LOADING","GET_PRODUCTS_ERROR","GET_PRODUCT_DETAIL_LOADING","GET_PRODUCT_DETAIL_SUCCESS","GET_PRODUCT_DETAIL_ERROR","ADD_TO_CART_LOADING","ADD_TO_CART_SUCCESS","ADD_TO_CART_ERROR","REMOVE_FROM_CART_LOADING","REMOVE_FROM_CART_SUCCESS","REMOVE_FROM_CART_ERROR","axios","createMessage","productListURL","endpoint","addToCartURL","removeFromCartURL","searchURL","orderItemsDeleteURL","messageURL","authAxios","fetchCart","getItems","dispatch","type","get","then","res","payload","data","catch","err","filterCategory","category","console","log","searchItems","item","getItemDetail","slug","handleAddToCart","code","cart","localStorage","getItem","inCart","item_obj","find","ref_code","post","handleRemoveFromCart","handleRemoveItem","id","delete","sendMsg","config","headers"],"mappings":"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","sourcesContent":["import {\r\n  GET_PRODUCTS_SUCCESS,\r\n  GET_PRODUCTS_LOADING,\r\n  GET_PRODUCTS_ERROR,\r\n  GET_PRODUCT_DETAIL_LOADING,\r\n  GET_PRODUCT_DETAIL_SUCCESS,\r\n  GET_PRODUCT_DETAIL_ERROR,\r\n  ADD_TO_CART_LOADING,\r\n  ADD_TO_CART_SUCCESS,\r\n  ADD_TO_CART_ERROR,\r\n  REMOVE_FROM_CART_LOADING,\r\n  REMOVE_FROM_CART_SUCCESS,\r\n  REMOVE_FROM_CART_ERROR,\r\n} from \"../types\";\r\nimport axios from \"axios\";\r\nimport { createMessage } from \"./messages\";\r\nimport {\r\n  productListURL,\r\n  endpoint,\r\n  addToCartURL,\r\n  removeFromCartURL,\r\n  searchURL,\r\n  orderItemsDeleteURL,\r\n  messageURL,\r\n} from \"../../constant\";\r\nimport { authAxios } from \"../../utils\";\r\nimport { fetchCart } from \"./cart\";\r\n\r\nexport const getItems = () => (dispatch) => {\r\n  dispatch({\r\n    type: GET_PRODUCTS_LOADING,\r\n  });\r\n  axios\r\n    .get(productListURL)\r\n    .then((res) => {\r\n      dispatch({\r\n        type: GET_PRODUCTS_SUCCESS,\r\n        payload: res.data,\r\n      });\r\n    })\r\n    .catch((err) => {\r\n      dispatch({\r\n        type: GET_PRODUCTS_ERROR,\r\n        payload: err,\r\n      });\r\n    });\r\n};\r\n\r\nexport const filterCategory = (category) => (dispatch) => {\r\n  dispatch({\r\n    type: GET_PRODUCTS_LOADING,\r\n  });\r\n  axios\r\n    .get(productListURL)\r\n    .then((res) => {\r\n      console.log(res.data);\r\n      dispatch({\r\n        type: GET_PRODUCTS_SUCCESS,\r\n        payload: res.data,\r\n      });\r\n    })\r\n    .catch((err) => {\r\n      dispatch({\r\n        type: GET_PRODUCTS_ERROR,\r\n        payload: err,\r\n      });\r\n    });\r\n};\r\n\r\nexport const searchItems = (item) => (dispatch) => {\r\n  dispatch({\r\n    type: GET_PRODUCTS_LOADING,\r\n  });\r\n  axios\r\n    .get(`${searchURL}${item}`)\r\n    .then((res) => {\r\n      dispatch({\r\n        type: GET_PRODUCTS_SUCCESS,\r\n        payload: res.data,\r\n      });\r\n    })\r\n    .catch((err) => {\r\n      dispatch({\r\n        type: GET_PRODUCTS_ERROR,\r\n        payload: err,\r\n      });\r\n    });\r\n};\r\n\r\nexport const getItemDetail = (slug) => (dispatch) => {\r\n  console.log(`${endpoint}${slug}`);\r\n  axios\r\n    .get(`${endpoint}${slug}`)\r\n    .then((res) => {\r\n      dispatch({\r\n        type: GET_PRODUCT_DETAIL_SUCCESS,\r\n        payload: res.data,\r\n      });\r\n    })\r\n    .catch((err) => {\r\n      dispatch({\r\n        type: GET_PRODUCT_DETAIL_ERROR,\r\n        payload: err,\r\n      });\r\n    });\r\n};\r\n\r\nexport const handleAddToCart = (code) => (dispatch) => {\r\n  dispatch({\r\n    type: ADD_TO_CART_LOADING,\r\n  });\r\n\r\n  let cart = localStorage.getItem(\"cart\");\r\n\r\n  console.log(cart);\r\n\r\n  let inCart = cart?.item_obj.find((item) => item.ref_code === code);\r\n\r\n  console.log(inCart);\r\n  console.log(code);\r\n\r\n  authAxios\r\n    .post(`${addToCartURL}${code}/`)\r\n    .then((res) => {\r\n      fetchCart();\r\n      dispatch({\r\n        type: ADD_TO_CART_SUCCESS,\r\n        payload: res.data,\r\n      });\r\n    })\r\n    .catch((err) => {\r\n      dispatch({\r\n        type: ADD_TO_CART_ERROR,\r\n        payload: err,\r\n      });\r\n    });\r\n};\r\n\r\nexport const handleRemoveFromCart = (code) => (dispatch) => {\r\n  console.log(`${removeFromCartURL}${code}/`);\r\n  dispatch({\r\n    type: REMOVE_FROM_CART_LOADING,\r\n  });\r\n  authAxios\r\n    .post(`${removeFromCartURL}${code}/`)\r\n    .then((res) => {\r\n      dispatch({\r\n        type: REMOVE_FROM_CART_SUCCESS,\r\n        payload: res.data,\r\n      });\r\n    })\r\n    .catch((err) => {\r\n      dispatch({\r\n        type: REMOVE_FROM_CART_ERROR,\r\n        payload: err,\r\n      });\r\n    });\r\n};\r\n\r\nexport const handleRemoveItem = (id) => (dispatch) => {\r\n  // dispatch({\r\n  //   type: REMOVE_FROM_CART_LOADING,\r\n  // });\r\n  authAxios\r\n    .delete(orderItemsDeleteURL(id))\r\n    .then((res) => {\r\n      fetchCart();\r\n      // dispatch({\r\n      //   type: REMOVE_FROM_CART_SUCCESS,\r\n      //   payload: id,\r\n      // });\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n};\r\n\r\nexport const sendMsg = (data) => (dispatch) => {\r\n  const config = {\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  };\r\n\r\n  axios\r\n    .post(messageURL, data, config)\r\n    .then((res) => {\r\n      dispatch(createMessage(res.data));\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n};\r\n"]},"metadata":{},"sourceType":"module"}